!function(a){"use strict";var e=a.$ite={window:a,doc:a.document,body:a.document.body,params:{debug:!1,trusted:!1,sid:0,vid:0,aid:0,lang:"en",domain:""},utils:{onLoad:function(a){document.addEventListener("DOMContentLoaded",a)},loadScript:function(a,t){if(t=t||{},a){var c=document.createElement("script");c.src=a,c.type="text/javascript",c.async=!0,document.head.appendChild(c),t.onload&&(c.onload=t.onload),t.onerror&&(c.onerror=t.onerror),e.debug("Load script "+a)}},addEvent:function(a,e,t){a.addEventListener?a.addEventListener(e,t,!1):a.attachEvent&&a.attachEvent("on"+e,t)}},start:function(t){for(var c in this.params=t,(e.window.site_debug||-1!==a.document.location.search.indexOf("profiling="))&&(this.params.debug=!0),e.debug("Init site"),e)if("object"==typeof e[c]&&e[c].start&&"function"==typeof e[c].start)try{e[c].start.call(e[c])}catch(a){e.error("Site start error:",a)}},hasParam:function(a){return!!this.params[a]},getParam:function(a){return this.params[a]||null},debug:function(){if(this.params.debug){var t=Array.from(arguments);t.unshift("<<DEBUG>>"),a.console.log.apply(e.window,t)}},error:function(){var t=Array.from(arguments);t.unshift("<<ERROR>>"),a.console.error.apply(e.window,t)}}}(window),function(a){"use strict";var e=a.captcha={STATUS_NOT_LOADED:0,STATUS_LOADING:1,STATUS_LOADED:2,scripts:{recaptcha:"https://www.google.com/recaptcha/api.js?onload=onReCaptchaLoad&render=explicit",mcaptcha:"//captcha.megagroup.ru/static/captcha.js?3.2",jquery:"/g/libs/jquery/3.2.1/jquery.min.js"},status:{recaptcha:0,mcaptcha:0},queue:{recaptcha:[],mcaptcha:[]},submit:!1,ajax:window.XMLHttpRequest.prototype.send,ajax_force:!1,ajax_data:[],count:0,badge:"badge-recaptcha",jquery_version:"",reData:null,isRendered:!1,initEvents:["click","focus","touchstart","touchmove","scroll"],onMCaptchaLoad:function(){e.status.mcaptcha=2,a.debug("MCaptcha loaded"),e.queue.mcaptcha.forEach((function(a){e.addMCaptcha(a)})),e.queue.mcaptcha=[]},addReCaptcha:function(t){if(2===e.status.recaptcha)try{var c,n,r=$(t.container),i={sitekey:t.sitekey,type:t.type,size:t.rsize,theme:t.theme},o=!1,d=r.parents("form:first"),s=d.get(0),u=s.submit,p=d.find("button, [type=submit]"),h=d.find('[name^="d["]').length,l=!1,f=d.attr("method")&&"post"===d.attr("method").toLowerCase(),m=d.hasClass("mosaic-form__form"),g=d.attr("action")?d.attr("action"):"",y=-1!==g.indexOf("action=add"),v=-1!==g.indexOf("cp.maliver.ru"),b=1===d.data("recaptcha-init"),x=-1!==g.indexOf("mode=cart"),j=!1,w={},_={},k=function(t){if(t&&d.find('[name="g-recaptcha-response"]').html(t),!j&&(f||h||l))if(a.debug("submit event"),e.ajax_force)-1!==e.ajax_data[1][0].indexOf("&g-recaptcha-response=&")&&(e.ajax_data[1][0]=e.ajax_data[1][0].replace("&g-recaptcha-response=&","&g-recaptcha-response="+t+"&")),-1===e.ajax_data[1][0].indexOf("&g-recaptcha-response=&")&&!0===e.ajax_data[1][0].endsWith("&g-recaptcha-response=")&&(e.ajax_data[1][0]+=t),-1===e.ajax_data[1][0].indexOf("&g-recaptcha-response=&")&&-1===e.ajax_data[1][0].indexOf("&g-recaptcha-response=")&&(e.ajax_data[1][0]+="&g-recaptcha-response="+t),e.ajax_force=!1,a.debug("ajax apply in submit event"),e.ajax.apply(e.ajax_data[0],e.ajax_data[1]),e.ajax_data=[];else{o=!0;try{a.debug("form submit for event"),d.submit()}catch(e){a.debug("form js submit - no event",e),s.submit()}}else j&&(j=!1,a.debug("click event in submit"),p.each((function(a,e){n===e&&($._data(e).events.click.splice(0,$._data(e).events.click.length),$._data(e).events.click.push(..._[a]),w[a]="on",$(n).trigger("click"),E())})));R().css("visibility","hidden")},q=function(){if(!j)return n=this,j=!0,a.debug("click event execute recaptcha"),e.isRendered||e.handleCLick(),grecaptcha.execute(R().data("recaptcha-widget-id")).then((function(a){k(a)})),!1},C=function(){R().css("visibility","visible")},L=function(){R().css("visibility","hidden")},E=function(){p.each((function(a,e){void 0!==$._data(e).events.click&&(void 0!==w[a]&&"on"!==w[a]||($._data(e).events.click.forEach((function(t,c){void 0===_[a]&&(_[a]=[]),_[a][c]=$._data(e).events.click[c]})),$._data(e).events.click.splice(0,$._data(e).events.click.length),$(e).on("click",q),w[a]="off"))}))},R=function(){return void 0===c&&(c=$("#"+e.badge)),c};(r.parents("[data-uri]:first").length&&-1!==r.parents("[data-uri]:first").attr("data-uri").indexOf("method=form2/")||d.attr("data-s3-anketa-id")&&"_cn"===t.name)&&(l=!0),r.empty(),y||x||b||v||!f&&(!h&&!l||m)?m||r.remove():(a.debug("Draw recaptcha in container",t.container),"recaptcha-page"===t.name?(i.size=4,i.callback=k,r.data("recaptcha-widget-id",grecaptcha.render(t.container,i))):(s.submit=function(){o?u.apply(s):(a.debug("js submit execute recaptcha"),e.isRendered||e.handleCLick(),grecaptcha.execute(R().data("recaptcha-widget-id")).then((function(a){k(a)})))},e.getJqueryVersion()<10700?(d.find("input,textarea,select").focus(C),d.find("input,textarea,select").blur(L),d.submit((function(){if(!o)return a.debug("old jquery submit execute recaptcha"),e.isRendered||e.handleCLick(),grecaptcha.execute(R().data("recaptcha-widget-id")).then((function(a){k(a)})),!1}))):(d.find("input,textarea,select").on("focusin",C),d.find("input,textarea,select").on("focusout",L),d.on("submit",(function(){if(!o)return a.debug("jquery submit execute recaptcha"),e.isRendered||e.handleCLick(),grecaptcha.execute(R().data("recaptcha-widget-id")).then((function(a){k(a)})),!1})),!f&&h&&E()),r.remove()),d.append('<textarea name="g-recaptcha-response" style="display: none !important;"></textarea>'),d.data("recaptcha-init",1))}catch(e){a.error("ReCaptcha error: ",e)}else e.queue.recaptcha.push(t)},addMCaptcha:function(t){if(2===e.status.mcaptcha){var c=$(t.container),n="s3_captcha_cn"+Math.floor(1e4*Math.random()),r='</br><input type="text" name="'+t.name+'" maxlength="'+t.msize+'" size="'+t.msize+'" />';c.attr("id",n);try{a.debug("Draw mcaptcha in container",t.container),mgCaptcha.draw("/my/s3/captcha/get.php",n),c.append(r)}catch(e){a.error("MCaptcha error:",e)}}else 0===e.status.mcaptcha&&(a.utils.loadScript(e.scripts.mcaptcha,{onload:function(){e.onMCaptchaLoad()}}),e.status.mcaptcha=1),e.queue.mcaptcha.push(t)},checker:function(){$("[data-captcha]").each((function(t,c){var n=$(c);"recaptcha"===n.attr("data-captcha")?0===n.parents("form:first").length?(a.debug("Not find parent form for ",n),n.remove()):(a.debug("Init recaptcha by default for ",n),e.addReCaptcha({sitekey:n.attr("data-sitekey"),type:n.attr("data-type"),rsize:n.attr("data-rsize"),theme:n.attr("data-theme"),lang:n.attr("data-lang"),name:n.attr("data-name"),container:c})):(a.debug("Init mcaptcha by default for ",n),e.addMCaptcha({name:n.attr("data-name"),msize:n.attr("data-msize"),container:c})),n.removeAttr("data-captcha")})),e.queue.recaptcha.length&&a.doc.querySelector("[data-name=recaptcha-page]")&&0===e.status.recaptcha&&a.doc.querySelector("[data-name=recaptcha-page]").click()},start:function(){if(a.window.$)e.load();else{var t=document.createElement("script");t.src=e.scripts.jquery,t.async=!0,t.onload=function(){e.load()},document.getElementsByTagName("head")[0].appendChild(t)}},handleCLick:function(){e.queue.recaptcha.length&&0===e.status.recaptcha&&(a.utils.loadScript(e.scripts.recaptcha+"&hl="+a.getParam("lang"),{onerror:function(e){a.error("ReCaptcha load error: ",e)}}),e.status.recaptcha=1)},load:function(){window.XMLHttpRequest.prototype.send=function(){try{if(arguments[0]){var t=arguments[0],c=-1!==t.indexOf("g-recaptcha-response="),n=!1;c?(t.split("&").forEach((function(a){-1!==a.indexOf("g-recaptcha-response=")&&((a=a.split("=")).length>1&&a[1]<1||1===a.length||/[а-яА-ЯЁё]/.test(decodeURI(a[1])))&&(n=!0)})),n&&!e.ajax_force?(e.ajax_force=!0,e.ajax_data=[this,arguments],a.debug("ajax stop post - recaptcha error")):(e.ajax_data=[],e.ajax_force=!1,a.debug("ajax post, no recaptcha error"),e.ajax.apply(this,[].slice.call(arguments)))):(a.debug("ajax post, no recaptcha"),e.ajax.apply(this,[].slice.call(arguments)))}else a.debug("ajax get"),e.ajax.apply(this,[].slice.call(arguments))}catch(t){a.debug("ajax manipulate error, send",t),e.ajax.apply(this,[].slice.call(arguments))}},setInterval((function(){try{e.checker()}catch(e){a.error("Captcha checker:",e)}}),300),e.initEvents.forEach((t=>{a.doc.addEventListener(t,e.handleCLick,!0)}))},init:function(){e.reData={sitekey:e.queue.recaptcha[0].sitekey,type:e.queue.recaptcha[0].type,size:e.queue.recaptcha[0].rsize,theme:e.queue.recaptcha[0].theme},$("body").append(`<div id="${e.badge}"style="visibility: hidden;"></div>`),e.isRendered||e.render()},render:function(){$(`#${e.badge}`).data("recaptcha-widget-id",grecaptcha.render(e.badge,e.reData)),e.isRendered=!0},getJqueryVersion:function(){""===e.jquery_version&&(jQuery.fn.jquery.split(".").forEach((function(a){1===a.length&&(e.jquery_version=e.jquery_version.concat(0)),e.jquery_version=e.jquery_version.concat(a)})),e.jquery_version=parseInt(e.jquery_version));return e.jquery_version},checkJqueryVersion:function(a,e){}};a.window.onReCaptchaLoad=function(){a.window.dispatchEvent(new Event("ReCaptchaLoaded")),e.status.recaptcha=2,a.debug("Recaptcha loaded"),e.initEvents.forEach((t=>{a.doc.removeEventListener(t,e.handleCLick)})),e.init(),e.queue.recaptcha.forEach((function(a){e.addReCaptcha(a)})),a.captcha.queue.recaptcha=[]}}(window.$ite),function(a){"use strict";a.hotkeys={start:function(){a.getParam("trusted")&&a.utils.addEvent(window.document,"keydown",(function(e){e.altKey&&80===e.keyCode&&-1===location.search.indexOf("profiling")&&(-1===location.search.indexOf("?")?location.search+="?profiling="+Math.round(1e5*Math.random()):location.search+="&profiling="+Math.round(1e5*Math.random())),e.altKey&&79===e.keyCode&&a.hasParam("domain")&&a.hasParam("vid")&&a.hasParam("aid")&&a.window.open(window.atob("aHR0cDovLw==")+a.getParam("domain")+window.atob("L215L3MzL2RhdGEvbWVudS9kZWZhdWx0LnBocD9tY2E9")+a.getParam("aid")+window.atob("Jm1jcz0xJnZlcl9pZD0=")+a.getParam("vid"))}))}}}(window.$ite);