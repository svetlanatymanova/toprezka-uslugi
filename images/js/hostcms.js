function declension(e,t,i,o){var a=e%10,n=e%100;return 1==a&&11!=n?t:2==a&&12!=n||3==a&&13!=n||4==a&&14!=n?i:o}!function(e){e.extend({addIntoCart:function(e,t,i){return $.clientRequest({path:e+"?add="+t+"&count="+i,callBack:$.addIntoCartCallback,context:$(".count_cart")}),$.fancybox.open({src:"/catalog/info/addcartinfo/",type:"ajax"}),!1},addIntoCartCallback:function(t,i,o){$.loadingScreen("hide"),e(this).html(t)},addCompare:function(e,t,i){return $(i).toggleClass("current"),$.clientRequest({path:e+"?compare="+t,callBack:function(){$.loadingScreen("hide")},context:$(i)}),$("#compareButton").show(),!1},addFavorite:function(e,t,i){return $(i).toggleClass("product-card__wish-list-link--added"),$.clientRequest({path:e+"?favorite="+t,callBack:$.addFavoriteCallback,context:$("#little-favorite")}),!1},addFavoriteCallback:function(e,t,i){$.loadingScreen("hide"),$(this).replaceWith(e)},sendVote:function(e,t,i){return $.clientRequest({path:"?id="+e+"&vote="+t+"&entity_type="+i,callBack:$.sendVoteCallback}),!1},sendVoteCallback:function(e,t){$.loadingScreen("hide"),$("#"+e.entity_type+"_id_"+e.item).removeClass("up down"),e.delete_vote||(1==e.value?$("#"+e.entity_type+"_id_"+e.item).addClass("up"):$("#"+e.entity_type+"_id_"+e.item).addClass("down")),$("#"+e.entity_type+"_rate_"+e.item).text(e.rate),$("#"+e.entity_type+"_likes_"+e.item).text(e.likes),$("#"+e.entity_type+"_dislikes_"+e.item).text(e.dislikes)}})}(jQuery),function(e){e.fn.messageTopicsHostCMS=function(t){t=e.extend({timeout:1e4,data:"#messages_data",url:"#url",page:"#page",message_field:"textarea",page_link:".page_link",keyToSend:13},t);var i=e.extend({_url:this.find(t.url).text(),_page:parseInt(this.find(t.page).text())+1,oData:this.find(t.data),oForm:this.find("form"),oField:this.find(t.message_field),oPage:this.find(t.page_link),oTemp:{}},this);function o(o){return o||(o={}),form=o.form?"&"+o.form:"",e.ajax({url:i._url+"page-"+i._page+"/",type:"POST",data:"ajaxLoad=1"+form,dataType:"json",success:function(o){i.oData.html(e(o.content).find(t.data).html())},error:function(){return!1}})}return this.ready((function(){return 1==i.length&&(setInterval(o,t.timeout),i.oField.keydown((function(e){e.ctrlKey&&e.keyCode==t.keyToSend&&i.oForm.submit()})),i.oField.keydown((function(e){e.ctrlKey&&e.keyCode==t.keyToSend&&i.oForm.submit()})),i.oForm.submit((function(){return i.oField.val().trim().length&&(o({form:i.oForm.serialize()}),i.oForm.find(":input:not([type=submit],[type=button])").each((function(){e(this).val("")}))),!1}))),!1}))}}(jQuery),function(e){e.fn.messagesHostCMS=function(t){t=e.extend({chat_height:465,timeout:1e4,load_messages:"#load_messages",chat_window:"#chat_window",messages:"#messages",prefix_message_id:"msg_",message_field:"textarea",url:"#url",limit:"#limit",total:"#total",topic_id:"#topic_id",keyToSend:13},t);var i=e.extend({_activity:1,_autoscroll:1,_url:this.find(t.url).text(),_limit:this.find(t.limit).text(),_total:this.find(t.total).text(),_topic_id:this.find(t.topic_id).text(),_count_msg:0,oLoad:this.find(t.load_messages),oWindow:this.find(t.chat_window),oMessages:this.find(t.messages),oField:this.find(t.message_field),oForm:this.find("form"),oTemp:{}},this);function o(o){return o||(o={}),page=o.page?o.page+"/":"",form=o.form?"&"+o.form:"",e.ajax({url:i._url+i._topic_id+"/"+page,type:"POST",data:"ajaxLoad=1&activity="+i._activity+form,dataType:"json",success:function(n){i.oTemp=e(n.content),!o.preload&&i._count_msg>i._limit&&i.oTemp.find(t.messages+" > :first[id^="+t.prefix_message_id+"]").remove(),i.oTemp.find(t.messages+" > [id^="+t.prefix_message_id+"]").each((function(){oMsg=i.oMessages.find('[id="'+e(this).attr("id")+'"]'),1==oMsg.length&&oMsg.replaceWith(e(this))})),newMessages=i.oTemp.find(t.messages+" > [id^="+t.prefix_message_id+"]"),newMessages.length&&(o.preload?(i.oMessages.prepend(newMessages),i._autoscroll=0,i.oWindow.scrollTop(0)):i.oMessages.append(newMessages),a())},error:function(){return!1}})}function a(){i.oWindow.height()>t.chat_height&&i.oWindow.height(t.chat_height+"px"),1==i._autoscroll&&i.oWindow.scrollTop(i.oMessages.height()-t.chat_height),i.oTemp.length&&(i._total=i.oTemp.find(t.total).text()),i._count_msg=i.oMessages.find("> *[id^="+t.prefix_message_id+"]").length,i._count_msg>=i._total&&i.oLoad.is(":visible")&&i.oLoad.toggle(),i._activity=0}return this.ready((function(){return 1==i.length&&(a(),setInterval(o,t.timeout),e("body").mousemove((function(){i._activity=1==i._autoscroll?1:0})),i.oField.keydown((function(e){e.ctrlKey&&e.keyCode==t.keyToSend&&i.oForm.submit()})),i.oWindow.scroll((function(){i._autoscroll=i.oMessages.height()==i.oWindow.scrollTop()+t.chat_height?1:0})),i.oForm.submit((function(){return i.oField.val().trim().length&&(i._autoscroll=1,i._activity=1,o({form:i.oForm.serialize()}),i.oField.val("")),!1})),i.oLoad.click((function(){o({preload:!0,page:"page-"+parseInt(i._count_msg/i._limit+1)})}))),!1}))}}(jQuery);