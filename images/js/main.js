function set_count_mod(e,t){var o=document.getElementById(e);(iCurrCount=parseInt(o.value))||(iCurrCount=0),iCurrCount<=0&&t<0||(o.value=iCurrCount+t)}function SlideWindow(e){var t=document.getElementById(e);if(null==t)return!1;"block"==t.style.display?HideWindow(e):ShowWindow(e)}function doSetLocation(e,t){var o=new JsHttpRequest;$.loadingScreen("show"),o.onreadystatechange=function(){if(4==o.readyState){if($.loadingScreen("hide"),null!=o.responseJS&&null!=o.responseJS.result){for(var e in oSelect=document.getElementById(location_select_id),oSelect.options.length=0,oSelect.options[oSelect.options.length]=new Option(" ... ",0),o.responseJS.result)oSelect.options[oSelect.options.length]=new Option(o.responseJS.result[e],e.substr(1));oCity=document.getElementById(city_select_id),oCity.options.length=0,oCity.options[oCity.options.length]=new Option(" ... ",0),oCityarea=document.getElementById(cityarea_select_id),oCityarea.options.length=0,oCityarea.options[oCityarea.options.length]=new Option(" ... ",0)}return!0}},o.open("get",t+"?action=get_location&shop_country_id="+e,!0),o.send(null)}function doSetCity(e,t){var o=new JsHttpRequest;$.loadingScreen("show"),o.onreadystatechange=function(){if(4==o.readyState){if($.loadingScreen("hide"),null!=o.responseJS&&null!=o.responseJS.result){for(var e in oSelect=document.getElementById(city_select_id),oSelect.options.length=0,oSelect.options[oSelect.options.length]=new Option(" ... ",0),o.responseJS.result)oSelect.options[oSelect.options.length]=new Option(o.responseJS.result[e],e.substr(1));oCityarea=document.getElementById(cityarea_select_id),oCityarea.options.length=0,oCityarea.options[oCityarea.options.length]=new Option(" ... ",0)}return!0}},o.open("get",t+"?action=get_city&shop_location_id="+e,!0),o.send(null)}function doSetCityArea(e,t){var o=new JsHttpRequest;$.loadingScreen("show"),o.onreadystatechange=function(){if(4==o.readyState){if($.loadingScreen("hide"),null!=o.responseJS&&null!=o.responseJS.result)for(var e in oSelect=document.getElementById(cityarea_select_id),oSelect.options.length=0,oSelect.options[oSelect.options.length]=new Option(" ... ",0),o.responseJS.result)oSelect.options[oSelect.options.length]=new Option(o.responseJS.result[e],e.substr(1));return!0}},o.open("get",t+"?action=get_cityarea&shop_city_id="+e,!0),o.send(null)}function GetStyle(e,t){var o="";if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(e,null);o=n?n.getPropertyValue(t):null}else e.currentStyle&&"auto"==(o=e.currentStyle[t])&&(o="top"==t?e.offsetTop:e.offsetLeft);return o}function SetGradeMessage(e,t){var o=new JsHttpRequest;$.loadingScreen("show"),o.onreadystatechange=function(){if(4==o.readyState)return $.loadingScreen("hide"),!0},o.open("get","./?action=set_message_grade&helpdesk_message_id="+e+"&grade="+t,!0),o.send(null)}function ReNewCaptcha(e,t){if(null!=document.images.captcha){var o=Math.floor(1e5*Math.random());document.images.captcha.src="/captcha.php?get_captcha="+e+"&height="+t+"&anc="+o}}function ReNewCaptchaById(e,t,o){$("#"+e).updateCaptcha(t,o)}function ShowHide(e){var t=document.getElementById(e);if(null==t)return!1;"block"==t.style.display?t.style.display="none":t.style.display="block"}function callbackfunction_showFormAddItem(e){if(void 0!==e&&($.loadingScreen("hide"),void 0!==e.result)){html=e.result,document.getElementById("AddItemForm").innerHTML=html,runScripts(document.getElementById("AddItemForm").getElementsByTagName("SCRIPT"));var t=document.getElementById("AddItemMessage");t&&(t.innerHTML="")}}function callbackfunction_SendFormItem(e){if(void 0!==e&&"undefined"!=e.message){var t=document.getElementById("AddItemMessage");t&&(t.innerHTML=e.message,runScripts(t.getElementsByTagName("SCRIPT")),window.location.href=window.location.href.indexOf("#")>=0?window.location.href:window.location.href+"#FocusAddItemMessage")}}function ShowImgWindow(e,t,o,n){obj=window.open("","","scrollbars=0,dialog=0,minimizable=1,modal=1,width="+o+",height="+n+",resizable=0"),obj.document.write("<html>"),obj.document.write("<head>"),obj.document.write("<title>"+e+"</title>"),obj.document.write("</head>"),obj.document.write("<body topmargin=0 leftmargin=0 marginwidth=0 marginheight=0>"),obj.document.write('<img src="'+t+'" width="'+o+'" height="'+n+'" />'),obj.document.write("</body>"),obj.document.write("</html>"),obj.document.close()}function getElementsByName_iefix(e,t){var o=document.getElementsByTagName(e),n=new Array,a=0;for(i=0;i<o.length;i++)att=o[i].getAttribute("name"),att==t&&(n[a]=o[i],a++);return n}function changeHeightFloatBlockBorder(e,t,o){var n=0;for(i=0;i<e.length;i++)(n=e[i].parentNode.offsetHeight+t)>0&&(e[i].style.height=n+"px",e[i].style.top=o+"px")}function HideShow(e,t){$("#"+e).css("display","none"),$("#"+t).css("display","block")}function ShowForums(e,t,o){var n;0==e?(n="none",e=""):(n="",e="none"),$("#down_"+t).css("display",n),$("#up_"+t).css("display",e);for(var i=1;i<=o;i++)$("#"+t+"_"+i).css("display",e)}!function(e){var t=[];e.extend({preLoadImages:function(){for(var e=arguments.length;e--;){var o=document.createElement("img");o.src=arguments[e],t.push(o)}}}),e.preLoadImages("/hostcmsfiles/images/ajax_loader.gif"),e(document).keydown((function(t){if(t.ctrlKey&&!e(document.activeElement).is(":input"))switch(t.which){case 37:e("#id_prev").length&&(window.location=e("#id_prev").attr("href"));break;case 39:e("#id_next").length&&(window.location=e("#id_next").attr("href"))}})),e.fn.extend({applyShadow:function(){return this.each((function(t,o){var n=e(o);e("<div>").attr("class","tl").appendTo(n),e("<div>").attr("class","t").height(15).appendTo(n),e("<div>").attr("class","tr").appendTo(n),e("<div>").attr("class","l").width(17).appendTo(n),e("<div>").attr("class","r").width(17).appendTo(n),e("<div>").attr("class","bl").appendTo(n),e("<div>").attr("class","b").height(21).appendTo(n),e("<div>").attr("class","br").appendTo(n)}))},updateCaptcha:function(e,t){return this.each((function(o,n){jQuery(n).prop("src","/captcha.php?get_captcha="+e+"&height="+t+"&anc="+Math.floor(1e5*Math.random()))}))},clearSelect:function(){return this.each((function(e,t){jQuery(t).empty().append(jQuery("<option>").attr("value",0).text("…"))}))}});var o={show:function(){e("body").css("cursor","wait");var t=e("#ajaxLoader"),o=e(window);0===t.length&&(t=e("<div></div>").appendTo(document.body).hide().prop("id","ajaxLoader").css("z-index","150000").css("position","absolute").append(e("<img>").prop("src","/hostcmsfiles/images/ajax_loader.gif"))),t.show().css("top",(o.height()-t.outerHeight(!0))/2+o.scrollTop()).css("left",(o.width()-t.outerWidth(!0))/2+o.scrollLeft())},hide:function(){e("#ajaxLoader").hide().css("left",-1e3),e("body").css("cursor","auto")}};jQuery.extend({loadingScreen:function(t){if(o[t])return o[t].apply(this,Array.prototype.slice.call(arguments,1));e.error("Method "+t+" does not exist on jQuery.tooltip")},clientSelectOptionsCallback:function(t,o,n){for(var i in e.loadingScreen("hide"),jQuery(this).empty(),t)jQuery(this).append(jQuery("<option>").attr("value",i.substr(1)).text(t[i]))},clientRequest:function(t){void 0===t.callBack&&alert("Callback function is undefined"),e.loadingScreen("show");var o=t.path,n=void 0!==t.data?t.data:{};return n._=Math.round((new Date).getTime()),jQuery.ajax({context:t.context,url:o,type:"POST",data:n,dataType:"json",success:t.callBack}),!1},loadLocations:function(t,o){e("#shop_country_location_city_id").clearSelect(),e("#shop_country_location_city_area_id").clearSelect(),e.clientRequest({path:t+"?ajaxLoad&shop_country_id="+o,callBack:e.clientSelectOptionsCallback,context:e("#shop_country_location_id")})},loadCities:function(t,o){e("#shop_country_location_city_area_id").clearSelect(),e.clientRequest({path:t+"?ajaxLoad&shop_country_location_id="+o,callBack:e.clientSelectOptionsCallback,context:e("#shop_country_location_city_id")})},loadCityAreas:function(t,o){e.clientRequest({path:t+"?ajaxLoad&shop_country_location_city_id="+o,callBack:e.clientSelectOptionsCallback,context:e("#shop_country_location_city_area_id")})},loadCityByName:function(t,o,n){e("#shop_country_location_city_area_id").clearSelect(),e.clientRequest({path:n+"?ajaxLoad&shop_country_id="+t+"&city_name="+o,callBack:e.loadCityByNameCallback,context:e("#shop_country_location_city_id")})},loadCityByNameCallback:function(t,o,n){if(e.loadingScreen("hide"),t.result){for(var i in e("select[name = shop_country_location_id]").find('option[value = "'+t.result.shop_country_location_id+'"]').prop("selected",!0),t.cities)jQuery(this).append(jQuery("<option>").attr("value",i.substr(1)).text(t.cities[i]));e("select[name = shop_country_location_city_id]").find('option[value = "'+t.result.shop_country_location_city_id+'"]').prop("selected",!0)}},friendOperations:function(t,o,n){e.loadingScreen("hide");var i=jQuery(this);switch(t){case"Added":i.text("Запрос на добавление в друзья отправлен.").prop("onclick",null);break;case"Removed":i.text("Пользователь убран из друзей.").prop("onclick",null)}}})}(jQuery);