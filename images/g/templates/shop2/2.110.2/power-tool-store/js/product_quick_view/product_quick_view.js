$((function(){var e,t="product-quick-view",i=".quick-view-trigger",l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if($(document).on("click",".quick-view-trigger",(function(t){t.preventDefault(),e||(e=$(".quick-view-trigger"));var i=$(this),l=i.attr("data-url")||i.attr("href");item=$(this).parents(".shop2-product-item").length>0?$(this).parents(".shop2-product-item"):$(this).parents(".kind-item"),ind=item.index(),n(l,(function(){o(ind,item)}))})),shop2&&shop2.product&&shop2.product._reload){var r=shop2.product._reload;shop2.product._reload=function(e){var i=Array.prototype.slice.call(arguments,0);$(e).closest("."+t).length?function(e){var t,i,l,r=$(e),d=shop2.product.getNodeData(e,"kinds",!0),s=shop2.product.getNodeData(e,"name"),p=shop2.product.getNodeData(e,"value"),c=r.closest("form"),a=c.get(0);if(d&&"undefined"!==$.type(s)&&"undefined"!==$.type(p)&&a){if(a.elements.meta&&(t=$.parseJSON(a.elements.meta.value)),l=a.elements.product_id.value,c.find("[name=submit]").prop("disabled",!0),0===(i=shop2.product.findKindId(l,d,s,p,t)))return!1;n(window.location.protocol+"//"+window.location.host+shop2.uri+"/product/"+i,(function(){o(ind,item)}))}}(e):r.apply(this,i)}}function n(e,i){if(!myo)return!1;$(".product-quick-view").length>0&&myo.close(),myo.open({ajax:e+"?&products_only=1",wrapClass:t,onLoad:function(){$("#shop2-tooltip").hide(),resizeController(639,(function(){$(".product-quick-view .card-slider__items").hasClass("slick-slider")&&$(".product-quick-view .card-slider__items").slick("unslick")}),(function(){$(".product-quick-view .card-slider__items").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,draggable:!1,asNavFor:".product-quick-view .card-slider-thumbs__items"})})),$(".product-quick-view .card-slider-thumbs__items").slick({infinite:!0,slidesToShow:4,slidesToScroll:1,asNavFor:".product-quick-view .card-slider__items",dots:!1,autoplay:!1,autoplaySpeed:1500,focusOnSelect:!0,responsive:[{breakpoint:1890,settings:{slidesToShow:4}},{breakpoint:1340,settings:{slidesToShow:4}}]}),!l&&jQuery().zoom&&$(".gr-image-zoom").zoom({magnify:1,duration:10,onZoomIn:function(){$(this).parent().addClass("hide_small_pic")},onZoomOut:function(){$(this).parent().removeClass("hide_small_pic")},callback:function(){var e=$(this),t=Math.floor(e.height()),i=Math.floor(e.width()),l=Math.floor(20*t/100),r=Math.floor(20*i/100),n=Math.floor($(this).prev().outerWidth()),o=Math.floor($(this).prev().outerHeight()),d=o+l,s=n+r;(t+l<=o-l||i+r<=n-r)&&$(this).parent().addClass("hide_big_pic"),(t<=o||i<=n)&&e.css({width:s,height:d})}}),amountInit(),elemToolTip(".product-compare"),$.isFunction(i)&&i()}})}function o(e,t){var l,r,n=t;if($(".popover-wrap.product-quick-view .popover-body").prepend('<div class="prev_product_caller hide">Пред.</div><div class="next_product_caller hide">След.</div>'),l=$(".popover-wrap.product-quick-view .popover-body").find(".prev_product_caller"),r=$(".popover-wrap.product-quick-view .popover-body").find(".next_product_caller"),n.parents(".product-list:not(.tns-slider):not(.slick-slider):not(.owl-carousel):not(.lightSlider)").length)var o=n.prev().length?n.prev().find(i):null,d=n.next().length?n.next().find(i):null;if(n.parents(".kinds_slider:not(.tns-slider):not(.slick-slider):not(.owl-carousel):not(.lightSlider)").length)o=n.prev().length?n.prev().find(i):null,d=n.next().length?n.next().find(i):null;if(n.parents(".product-list.tns-slider").length){o=n.prev().length?n.prev().find(i):null,d=n.next().length?n.next().find(i):null;null==n.parents(".product-list.tns-slider").find(".shop2-product-item").attr("id")&&$(".prev_product_caller, .next_product_caller").remove()}if(n.parents(".kinds_slider.tns-slider").length){o=n.prev().length?n.prev().find(i):null,d=n.next().length?n.next().find(i):null;null==n.parents(".kinds_slider.tns-slider").find(".kind-item").attr("id")&&$(".prev_product_caller, .next_product_caller").remove()}if(n.parents(".product-list.slick-slider").length){o=(n=n.parents(".slick-slide")).prev().length?n.prev().find(i):null,d=n.next().length?n.next().find(i):null;n.parents(".product-list.slick-slider").slick("getSlick").options.infinite&&$(".prev_product_caller, .next_product_caller").remove()}if(n.parents(".kinds_slider.slick-slider").length){o=(n=n.parents(".slick-slide")).prev().length?n.prev().find(i):null,d=n.next().length?n.next().find(i):null;n.parents(".kinds_slider").slick("getSlick").options.infinite&&$(".prev_product_caller, .next_product_caller").remove()}if(n.parents(".product-list.owl-carousel").length){o=(n=n.parents(".owl-item")).prev().length?n.prev().find(i):null,d=n.next().length?n.next().find(i):null;n.parents(".product-list.owl-carousel").find(".cloned").length>0&&$(".prev_product_caller, .next_product_caller").remove()}if(n.parents(".kinds_slider.owl-carousel").length){o=(n=n.parents(".owl-item")).prev().length?n.prev().find(i):null,d=n.next().length?n.next().find(i):null;n.parents(".kinds_slider.owl-carousel").find(".cloned").length>0&&$(".prev_product_caller, .next_product_caller").remove()}if(n.parents(".product-list.lightSlider").length){o=n.prev().length?n.prev().find(i):null,d=n.next().length?n.next().find(i):null;n.parents(".product-list.lightSlider").find(".clone").length>0&&$(".prev_product_caller, .next_product_caller").remove()}if(n.parents(".kinds_slider.lightSlider").length){o=n.prev().length?n.prev().find(i):null,d=n.next().length?n.next().find(i):null;n.parents(".kinds_slider.lightSlider").find(".clone").length>0&&$(".prev_product_caller, .next_product_caller").remove()}o&&l.removeClass("hide").on("click",(function(){o.trigger("click")})),d&&r.removeClass("hide").on("click",(function(){d.trigger("click")}))}}));