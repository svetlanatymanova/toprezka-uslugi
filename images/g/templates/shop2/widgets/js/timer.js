!function(e){e.fn.timer=function(t){var a=new Date,n=e.extend({utc:-a.getTimezoneOffset()/60,language:"ru",format_in:"%d.%M.%y %h:%m:%s",format_out:"%d %h %m %s",end_message:"00:00:00",wrapChar:!1,onEnd:function(){},change:!0,update_time:1e3,onTimeChange:function(){}},t);return this.each((function(){var t,r=e(this),s=e.trim(r.text()),o={days:["день","дня","дней"],hours:["час","часа","часов"],minuts:["минута","минуты","минут"],seconds:["секунда","секунды","секунд"]};"en"==n.language&&(o={days:["day","days","days"],hours:["hour","hours","hours"],minuts:["minut","minuts","minuts"],seconds:["second","seconds","seconds"]});for(var u=n.end_message,i=s.replace(/[^0-9]/g," ").split(" "),h=n.format_in.replace(/[^%dMyhms]/g," ").split(" "),l=[],c=0;c<h.length;c++)l[h[c]]=i[c];l["%y"]||a>new Date(a.getFullYear(),l["%M"]-1,l["%d"],l["%h"],l["%m"],l["%s"])&&(l["%y"]=a.getFullYear()+1);var m=new Date(l["%y"],l["%M"]-1>=0?l["%M"]-1:a.getMonth(),l["%d"]||a.getDate()+1,l["%h"]||0,l["%m"]||0,l["%s"]||0);function d(e){var t=e<10?"0":"";if(n.wrapChar){e=(t+e).toString().split("");var a="";for(c=0;c<e.length;c++)a+="<"+n.wrapChar+">"+e[c]+"</"+n.wrapChar+">";return a}return t+e}function f(e,t,a,n){return e=Math.abs(e),(e%=100)>=5&&e<=20?n:1==(e%=10)?t:e>=2&&e<=4?a:n}function g(){a=new Date;var e,s,i,h,l=m-a-(6e4*-a.getTimezoneOffset()-3600*n.utc*1e3),c=Math.floor(l/3600/1e3/24),g=Math.floor(l/3600/1e3)-24*Math.floor(l/3600/1e3/24),p=Math.floor(l/60/1e3)-60*Math.floor(l/3600/1e3),y=Math.floor(l/1e3)-60*Math.floor(l/60/1e3);l>0?(e=f(c,o.days[0],o.days[1],o.days[2]),s=f(g,o.hours[0],o.hours[1],o.hours[2]),i=f(p,o.minuts[0],o.minuts[1],o.minuts[2]),h=f(y,o.seconds[0],o.seconds[1],o.seconds[2]),c=d(c),g=d(g),p=d(p),y=d(y),u=n.format_out.replace("%d",c).replace("%h",g).replace("%m",p).replace("%s",y).replace(timerDays,e).replace(timerHours,s).replace(timerMinutes,i).replace(timerSeconds,h),r.html(u),n.onTimeChange.call(r)):(r.html(n.end_message),n.onEnd.call(r),clearInterval(t))}g(),n.change&&(t=window.setInterval(g,n.update_time))}))}}(jQuery);