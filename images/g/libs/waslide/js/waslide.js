!function(e,n,t,a){"use strict";e.waSlideMenu=function(a,o){var l="SlideMenu",i=this;i._addCssNamespace=function(n,t){var a={};return e.each(n,(function(e,n){"string"==typeof n&&(a[e]=t+l+n)})),a},i._setup=function(){i.o=e.extend({},e.waSlideMenu.defaults,o),i.o.classNames=i._addCssNamespace(i.o.classNames,i.o.namespace),i.$waSlideMenu=e(a),i.$waSlideMenu.data(l,i),i.$backs=[],i.$items=i.$waSlideMenu.find(i.o.itemSelector),i.$waSlideMenu.addClass(i.o.classNames.navigationClass),i.$movable=e("<div/>",{class:i.o.classNames.wrapperClass}),i.$inheritedMenus=i.$waSlideMenu.find(i.o.menuSelector),i.$rootMenu=e(i.$inheritedMenus.splice(0,1)),i.$rootMenu.addClass(i.o.classNames.allMenusClass).appendTo(i.$movable.prependTo(i.$waSlideMenu)),i.$inheritedMenus.addClass(i.o.classNames.allMenusClass+" "+i.o.classNames.inheritedMenuClass);var n=i.$items.prop("tagName");i.$inheritedMenus.each((function(t,a){var o=e(a).closest(i.o.itemSelector).children("a").attr("href"),l=e("<"+n+"/>",{class:i.o.classNames.menuItemBackClass});i.o.backOnTop?l.prependTo(e(a)):l.appendTo(e(a)),i.$backs.push(l.append(e("<a>",{href:o}).html(i.o.backLinkContent)))})),i.o.minHeightMenu>0&&(i.o.minHeightMenu=i.o.minHeightMenu>i.$waSlideMenu.height()?i.o.minHeightMenu:i.$waSlideMenu.height(),i.$waSlideMenu.css("min-height",i.o.minHeightMenu)),i.o.previousHeight=0,i.o.nowSliding=!1},i.gotoSelected=function(e,n){i._hideOtherMenus(e,i._scrollToTop),i._heightFix(e),i._animateSlide(e,n)},i._animateSlide=function(e,a){function o(e){var n=t.createElement("div");if(e in n.style)return e;for(var a=["-moz-","-webkit-","-o-","-ms-"],o=0;o<a.length;++o){var l=a[o]+e;if(l in n.style)return l}}var l=Math.abs(e*i.$movable.outerWidth()),s=e>0?i.o.onSlideForward:i.o.onSlideBack,r=function(e){var t=n.getComputedStyle(e,null).getPropertyValue(o("transform")).match(/matrix(?:(3d)\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}\d+))(?:, (-{0,1}\d+))(?:, (-{0,1}\d+)), -{0,1}\d+\)|\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}\d+))(?:, (-{0,1}\d+))\))/);return t?"3d"==t[1]?t.slice(2,5):(t.push(0),t.slice(5,8)):[0,0,0]}(i.$movable[0]),u=r[0]?r[0]:0,c=Math.abs(u),d={transform:"translate3d("+-1*(e>0?c+l:c-l)+"px, 0, 0)"};s&&"function"==typeof s&&s(i),a?(i.o.nowSliding=!0,animit(i.$movable[0]).queue(d,{duration:.3,timing:"ease-in-out"}).play(),i.$movable.one("transitionend",(function(){i.o.nowSliding=!1,i._scrollToTop(e),i.o.afterSlide&&"function"==typeof i.o.afterSlide&&i.o.afterSlide(i)}))):i.$movable.css("right","-"+l+"%")},i._scrollToTop=function(t){var a=i.$currentMenuElement.children(i.o.menuSelector),o=!!i.$currentMenuElement.hasClass(i.o.classNames.menuItemBackClass);if(i.o.scrollToTopSpeed&&(o||a.length>0)){var l=t>0?a.children(i.o.itemSelector).last():i.$currentMenuElement,s=t>0?l.closest(i.o.menuSelector):i.$currentMenuElement;l.offset().top-e(n).scrollTop()<0&&e("html, body").animate({scrollTop:s.offset().top},i.o.scrollToTopSpeed)}},i._heightFix=function(e){if(i.o.autoHeightMenu){var n=0;e>0?(i.$currentMenuElement.offset().top-i.$waSlideMenu.offset().top+i.$currentMenuElement.outerHeight(),n=i.$currentMenuElement.children(i.o.menuSelector).height()):n=i.$currentMenuElement.closest(i.o.menuSelector).height(),n=i.$currentMenuElement.parents("ul").length- -1*e?n-0:n,i.o.previousHeight=n,i.$waSlideMenu.css("height",n)}},i._hideOtherMenus=function(e){var n=i.$currentMenuElement.parentsUntil("."+i.o.classNames.navigationClass).filter(i.o.itemSelector);n.push(i.$currentMenuElement[0]),e>0&&(i.$inheritedMenus.css("visibility","hidden"),n.children(i.o.menuSelector).css("visibility","visible"))},i.loadContent=function(t,a){var o=e("<span/>",{class:i.o.classNames.loadingClass}).html("&nbsp;"),s='<div style="clear:both"></div>';i.o.loadContainer.length>0&&t.length>0&&e.inArray(a,i.o.excludeUri)<0&&location.origin+a!==n.location.href&&(i.o.beforeLoad&&"function"==typeof i.o.beforeLoad?i.o.beforeLoad.apply(t):t.html(o).append(s),e.ajax({url:a,type:"get"}).done((function(e){t.html(e+s),i.changeTitle(),i.changeUri(a),i.o.afterLoadDone&&"function"==typeof i.o.afterLoadDone&&i.o.afterLoadDone.apply(t),i.$waSlideMenu.trigger("afterLoadDone."+i.o.namespace+l)})).fail((function(){i.$currentMenuElement.siblings().children("."+i.o.classNames.menuItemBackClass).trigger("click"),i.o.afterLoadFail&&"function"==typeof i.o.afterLoadFail&&i.o.afterLoadFail.apply(t),i.$waSlideMenu.trigger("afterLoadFail."+i.o.namespace+l)})).always((function(){i.o.afterLoadAlways&&"function"==typeof i.o.afterLoadAlways&&i.o.afterLoadAlways.apply(t),i.$waSlideMenu.trigger("afterLoadAlways."+i.o.namespace+l)})))},i.changeTitle=function(){i.o.setTitle&&e("title").text(i.$currentMenuElement.children("a").text())},i.changeUri=function(e){n.history&&history.pushState&&n.history.pushState({},"",e)},i._menuItemClicked=function(n,t,a){if((e(n).parent().hasClass("sublevel")||e(n).parent().hasClass("waSlideMenu-back"))&&(t.preventDefault(),t.stopPropagation()),i.o.nowSliding)return!1;i.$currentMenuElement=e(n).parent(i.o.itemSelector);var o=e(n).attr("href"),s=i.$currentMenuElement.children(i.o.menuSelector),r=!!i.$currentMenuElement.hasClass(i.o.classNames.menuItemBackClass),u=e(i.o.loadContainer);i.$waSlideMenu.find(i.o.itemSelector).filter("."+i.o.selectedClass).removeClass(i.o.selectedClass),r&&(i.$currentMenuElement=i.$currentMenuElement.closest(i.o.menuSelector).closest(i.o.itemSelector)),i.$currentMenuElement.addClass(i.o.selectedClass),(!1===i.o.loadOnlyLatest||i.o.loadOnlyLatest&&0===s.length&&a>0)&&i.loadContent(u,o),0===s.length&&a>0&&(i.o.onLatestClick&&"function"==typeof i.o.onLatestClick&&i.o.onLatestClick.apply(n),i.$waSlideMenu.trigger("onLatestClick."+i.o.namespace+l)),(s.length>0||a<0)&&i.gotoSelected(a,!0)},i._menuDown=function(e){i._menuItemClicked(this,e,1)},i._menuUp=function(e){i._menuItemClicked(this,e,-1)},i._remove=function(){i.$items.off("click","a",i._menuDown),i.$waSlideMenu.removeClass(i.o.classNames.navigationClass),i.o.autoHeightMenu&&i.$waSlideMenu.css("height","initial"),i.o.minHeightMenu>0&&i.$waSlideMenu.css("min-height","initial"),i.$rootMenu.removeClass(i.o.classNames.allMenusClass).prependTo(i.$waSlideMenu),i.$inheritedMenus.removeClass(i.o.classNames.allMenusClass+" "+i.o.classNames.inheritedMenuClass),i.$inheritedMenus.css("visibility",""),e.each(i.$backs,(function(e,n){n.remove()})),i.$movable.remove(),i.$waSlideMenu.removeData(l)},i.exec=function(e){i.hasOwnProperty(e)&&"function"==typeof i[e]&&i[e].call()},i.destroy=function(){i._remove()},i.init=function(){i._setup(),e.each(i.$backs,(function(e,n){n.on("click","a",i._menuUp)})),i.$items.on("click","a",i._menuDown),n.history&&history.pushState&&(n.onpopstate=function(e){e&&e.state&&location.reload()});var t=i.$waSlideMenu.find("."+i.o.selectedClass).first();if(t.length){i.$currentMenuElement=t;var a=i.$currentMenuElement.children("a").first(),o=t.parentsUntil("."+i.o.classNames.navigationClass).filter(i.o.itemSelector).length,s=t.children(i.o.menuSelector).length;e.inArray(a.attr("href"),i.o.excludeUri)<0&&(s>0&&(o+=1),i.gotoSelected(o,!1),i._heightFix(s))}i.o.onInit&&"function"==typeof i.o.onInit&&i.o.onInit(i),i.$waSlideMenu.trigger("onInit."+i.o.namespace+l)};var s=e(a).data(l);"object"==typeof s?e.each(o,(function(e,n){"function"==typeof s[e]?s[e](n):s.o.hasOwnProperty(e)&&(s.o[e]=n)})):i.init()},e.waSlideMenu.defaults={namespace:"wa",slideSpeed:400,slideEasing:"linear",backLinkContent:"Back",backOnTop:!1,selectedClass:"selected",loadContainer:"",minHeightMenu:0,autoHeightMenu:!0,excludeUri:["/","#"],loadOnlyLatest:!1,menuSelector:"ul",itemSelector:"li",setTitle:!1,scrollToTopSpeed:0,onInit:null,onSlideForward:null,onSlideBack:null,onLatestClick:null,afterSlide:null,beforeLoad:null,afterLoadAlways:null,afterLoadDone:null,afterLoadFail:null,classNames:{navigationClass:"-nav",wrapperClass:"-wrapper",allMenusClass:"-menu",inheritedMenuClass:"-inheritedmenu",menuItemBackClass:"-back",loadingClass:"-loading"}},e.fn.waSlideMenu=function(n,t){return this.each((function(){var a;"object"!=typeof n&&void 0!==t?(a={})[n]=t:a=n,new e.waSlideMenu(this,a)}))}}(jQuery,window,document);