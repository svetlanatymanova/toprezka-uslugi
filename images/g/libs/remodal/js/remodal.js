!function(t,n){"function"==typeof define&&define.amd?define(["jquery"],(function(e){return n(t,e)})):"object"==typeof exports?n(t,require("jquery")):n(t,t.jQuery||t.Zepto)}(this,(function(t,n){"use strict";var e,a,i,o="remodal",s=t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.NAMESPACE||o,r=n.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],(function(t){return t+"."+s})).join(" "),d=n.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],(function(t){return t+"."+s})).join(" "),c=n.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.DEFAULTS),l={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},p="confirmation",m="cancellation",u=void 0!==(e=document.createElement("div").style).animationName||void 0!==e.WebkitAnimationName||void 0!==e.MozAnimationName||void 0!==e.msAnimationName||void 0!==e.OAnimationName,f=/iPad|iPhone|iPod/.test(navigator.platform);function g(t){if(u&&"none"===t.css("animation-name")&&"none"===t.css("-webkit-animation-name")&&"none"===t.css("-moz-animation-name")&&"none"===t.css("-o-animation-name")&&"none"===t.css("-ms-animation-name"))return 0;var n,e,a,i,o=t.css("animation-duration")||t.css("-webkit-animation-duration")||t.css("-moz-animation-duration")||t.css("-o-animation-duration")||t.css("-ms-animation-duration")||"0s",s=t.css("animation-delay")||t.css("-webkit-animation-delay")||t.css("-moz-animation-delay")||t.css("-o-animation-delay")||t.css("-ms-animation-delay")||"0s",r=t.css("animation-iteration-count")||t.css("-webkit-animation-iteration-count")||t.css("-moz-animation-iteration-count")||t.css("-o-animation-iteration-count")||t.css("-ms-animation-iteration-count")||"1";for(o=o.split(", "),s=s.split(", "),r=r.split(", "),i=0,e=o.length,n=Number.NEGATIVE_INFINITY;i<e;i++)(a=parseFloat(o[i])*parseInt(r[i],10)+parseFloat(s[i]))>n&&(n=a);return n}function h(){if(n(document).height()<=n(window).height())return 0;var t,e,a=document.createElement("div"),i=document.createElement("div");return a.style.visibility="hidden",a.style.width="100px",document.body.appendChild(a),t=a.offsetWidth,a.style.overflow="scroll",i.style.width="100%",a.appendChild(i),e=i.offsetWidth,a.parentNode.removeChild(a),t-e}function v(){if(!f){var t,e,a=n("html"),i=O("is-locked");a.hasClass(i)&&(e=n(document.body),t=parseInt(e.css("padding-right"),10)-h(),e.css("padding-right",t+"px"),a.removeClass(i))}}function $(t,n,e,a){var i=O("is",n),o=[O("is",l.CLOSING),O("is",l.OPENING),O("is",l.CLOSED),O("is",l.OPENED)].join(" ");t.$bg.removeClass(o).addClass(i),t.$overlay.removeClass(o).addClass(i),t.$wrapper.removeClass(o).addClass(i),t.$modal.removeClass(o).addClass(i),t.state=n,!e&&t.$modal.trigger({type:n,reason:a},[{reason:a}])}function C(t,e,a){var i=0,o=function(t){t.target===this&&i++},s=function(t){t.target===this&&0==--i&&(n.each(["$bg","$overlay","$wrapper","$modal"],(function(t,n){a[n].off(r+" "+d)})),e())};n.each(["$bg","$overlay","$wrapper","$modal"],(function(t,n){a[n].on(r,o).on(d,s)})),t(),0===g(a.$bg)&&0===g(a.$overlay)&&0===g(a.$wrapper)&&0===g(a.$modal)&&(n.each(["$bg","$overlay","$wrapper","$modal"],(function(t,n){a[n].off(r+" "+d)})),e())}function y(t){t.state!==l.CLOSED&&(n.each(["$bg","$overlay","$wrapper","$modal"],(function(n,e){t[e].off(r+" "+d)})),t.$bg.removeClass(t.settings.modifier),t.$overlay.removeClass(t.settings.modifier).hide(),t.$wrapper.hide(),v(),$(t,l.CLOSED,!0))}function O(){for(var t=s,n=0;n<arguments.length;++n)t+="-"+arguments[n];return t}function E(){var t,e,i=location.hash.replace("#","");if(i){try{e=n("[data-"+o+'-id="'+i+'"]')}catch(t){}e&&e.length&&(t=n[o].lookup[e.data(o)])&&t.settings.hashTracking&&t.open()}else a&&a.state===l.OPENED&&a.settings.hashTracking&&a.close()}function w(t,e){var a=n(document.body),i=this;i.settings=n.extend({},c,e),i.index=n[o].lookup.push(i)-1,i.state=l.CLOSED,i.$overlay=n("."+O("overlay")),null!==i.settings.appendTo&&i.settings.appendTo.length&&(a=n(i.settings.appendTo)),i.$overlay.length||(i.$overlay=n("<div>").addClass(O("overlay")+" "+O("is",l.CLOSED)).hide(),a.append(i.$overlay)),i.$bg=n("."+O("bg")).addClass(O("is",l.CLOSED)),i.$modal=t.addClass(s+" "+O("is-initialized")+" "+i.settings.modifier+" "+O("is",l.CLOSED)).attr("tabindex","-1"),i.$wrapper=n("<div>").addClass(O("wrapper")+" "+i.settings.modifier+" "+O("is",l.CLOSED)).hide().append(i.$modal),a.append(i.$wrapper),i.$wrapper.on("click."+s,"[data-"+o+'-action="close"]',(function(t){t.preventDefault(),i.close()})),i.$wrapper.on("click."+s,"[data-"+o+'-action="cancel"]',(function(t){t.preventDefault(),i.$modal.trigger(m),i.settings.closeOnCancel&&i.close(m)})),i.$wrapper.on("click."+s,"[data-"+o+'-action="confirm"]',(function(t){t.preventDefault(),i.$modal.trigger(p),i.settings.closeOnConfirm&&i.close(p)})),i.$wrapper.on("click."+s,(function(t){n(t.target).hasClass(O("wrapper"))&&i.settings.closeOnOutsideClick&&i.close()}))}w.prototype.open=function(){var t,e=this;e.state!==l.OPENING&&e.state!==l.CLOSING&&((t=e.$modal.attr("data-"+o+"-id"))&&e.settings.hashTracking&&(i=n(window).scrollTop(),location.hash=t),a&&a!==e&&y(a),a=e,function(){if(!f){var t,e,a=n("html"),i=O("is-locked");a.hasClass(i)||(e=n(document.body),t=parseInt(e.css("padding-right"),10)+h(),e.css("padding-right",t+"px"),a.addClass(i))}}(),e.$bg.addClass(e.settings.modifier),e.$overlay.addClass(e.settings.modifier).show(),e.$wrapper.show().scrollTop(0),e.$modal.focus(),C((function(){$(e,l.OPENING)}),(function(){$(e,l.OPENED)}),e))},w.prototype.close=function(t){var e=this;e.state!==l.OPENING&&e.state!==l.CLOSING&&e.state!==l.CLOSED&&(e.settings.hashTracking&&e.$modal.attr("data-"+o+"-id")===location.hash.substr(1)&&(location.hash="",n(window).scrollTop(i)),C((function(){$(e,l.CLOSING,!1,t)}),(function(){e.$bg.removeClass(e.settings.modifier),e.$overlay.removeClass(e.settings.modifier).hide(),e.$wrapper.hide(),v(),$(e,l.CLOSED,!1,t)}),e))},w.prototype.getState=function(){return this.state},w.prototype.destroy=function(){var t=n[o].lookup;y(this),this.$wrapper.remove(),delete t[this.index],0===n.grep(t,(function(t){return!!t})).length&&(this.$overlay.remove(),this.$bg.removeClass(O("is",l.CLOSING)+" "+O("is",l.OPENING)+" "+O("is",l.CLOSED)+" "+O("is",l.OPENED)))},n[o]={lookup:[]},n.fn[o]=function(t){var e,a;return this.each((function(i,s){null==(a=n(s)).data(o)?(e=new w(a,t),a.data(o,e.index),e.settings.hashTracking&&a.attr("data-"+o+"-id")===location.hash.substr(1)&&e.open()):e=n[o].lookup[a.data(o)]})),e},n(document).ready((function(){n(document).on("click","[data-"+o+"-target]",(function(t){t.preventDefault();var e=t.currentTarget.getAttribute("data-"+o+"-target"),a=n("[data-"+o+'-id="'+e+'"]');n[o].lookup[a.data(o)].open()})),n(document).find("."+s).each((function(t,e){var a=n(e),i=a.data(o+"-options");i?("string"==typeof i||i instanceof String)&&(i=function(t){var n,e,a,i,o={};for(i=0,e=(n=(t=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",")).split(",")).length;i<e;i++)n[i]=n[i].split(":"),("string"==typeof(a=n[i][1])||a instanceof String)&&(a="true"===a||"false"!==a&&a),("string"==typeof a||a instanceof String)&&(a=isNaN(a)?a:+a),o[n[i][0]]=a;return o}(i)):i={},a[o](i)})),n(document).on("keydown."+s,(function(t){a&&a.settings.closeOnEscape&&a.state===l.OPENED&&27===t.keyCode&&a.close()})),n(window).on("hashchange."+s,E)}))}));